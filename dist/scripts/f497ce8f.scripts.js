(function(){"use strict";angular.module("idfPnrApp",["ui.slider"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",reloadOnSearch:!1,slug:"main"}).when("/comprendre",{templateUrl:"views/comprendre.html",controller:"ComprendreCtrl",reloadOnSearch:!1,slug:"comprendre"}).when("/explorer",{templateUrl:"views/explorer.html",controller:"ExplorerCtrl",reloadOnSearch:!1,slug:"explorer"}).when("/comparer",{templateUrl:"views/comparer.html",controller:"ComparerCtrl",reloadOnSearch:!1,slug:"comparer"}).when("/revoir",{templateUrl:"views/revoir.html",controller:"RevoirCtrl",reloadOnSearch:!1,slug:"revoir"}).otherwise({redirectTo:"/"})}])}).call(this),function(){var a;a=function(a,b,c){return b.get("data/main.json").success(function(b){return a.data=b}),a.parc=c.parc,a.$on("$routeUpdate",function(){return a.parc=c.parc}),a.getParc=function(){return _.findWhere(a.data,{slug:a.parc})}},a.$inject=["$scope","$http","$routeParams","$location"],angular.module("idfPnrApp").controller("MainCtrl",a)}.call(this),function(){var a;a=function(a,b,c,d){var e;return e=function(){return a.categorie=c.search().categorie,a.metropole=c.search().metropole,a.parc=c.search().parc,a.theme=c.search().theme,a.regionSelected["name-1"]=c.search().region,a.annee.current=c.search().annee,a.annee.tick=27-_.keys(a.annee.list).indexOf(c.search().annee)},a.regionSelected={},a.annee={tick:27,current:1968,list:[]},a.current=b.current.slug,a.items=["main","comprendre","explorer","comparer","revoir"],d.get("data/revoir.json").success(function(b){return a.annee.list=_.countBy(b,"annee")}),e(),a.$watch("regionSelected",function(b){return null!=b["name-1"]?a.search("region",b["name-1"]):void 0},!0),a.$watch("annee",function(b,c){return b.tick!==c.tick||null==c.tick?a.search("annee",_.keys(a.annee.list)[27-b.tick]):void 0},!0),a.$on("$routeUpdate",e),a.$on("$routeChangeSuccess",function(){return a.current=b.current.slug}),a.search=function(a,b){return c.search(a,b)},a.view=function(a){return"views/menu-"+a+".html"},a.range=function(a){return new Array(a)}},a.$inject=["$scope","$route","$location","$http"],angular.module("idfPnrApp").controller("MenuCtrl",a)}.call(this),function(){var a;a=function(a,b){return a.categorie=b.search().categorie,a.$on("$routeUpdate",function(){return a.categorie=b.search().categorie})},a.$inject=["$scope","$location"],angular.module("idfPnrApp").controller("ComprendreCtrl",a)}.call(this),function(){var a;a=function(a,b,c){return c.get("data/explorer.json").success(function(b){return a.data=b}),a.parc=b.parc,a.metropole=b.metropole,a.$on("$routeUpdate",function(){return a.parc=b.parc,a.metropole=b.metropole}),a.get=function(){return null!=a.data&&null!=a.parc&&null!=a.metropole?a.data[a.parc][a.metropole]:void 0},a.metropoleStyle=function(){var b;return b=a.get(),null==b?{}:{top:b.top,left:b.left,width:a.data[a.parc].scale/100*b.width}}},a.$inject=["$scope","$routeParams","$http"],angular.module("idfPnrApp").controller("ExplorerCtrl",a)}.call(this),function(){var a;a=function(a,b,c){return c.get("data/comparer.json").success(function(b){return a.data=b}),a.theme=b.search().theme,a.$on("$routeUpdate",function(){return a.theme=b.search().theme})},a.$inject=["$scope","$location","$http"],angular.module("idfPnrApp").controller("ComparerCtrl",a)}.call(this),function(){var a;a=function(a,b,c){var d;return d=function(){return null!=c.search().annee?a.annee=c.search().annee||"1968":(a.annee="1968",c.search("annee","1968"))},d(),b.get("data/revoir.json").success(function(b){return a.annees=_.countBy(b,"annee")}),a.$on("$routeUpdate",d),a.visibles=function(){var b;return null==a.annee||null==a.annees?[]:(b=_.keys(a.annees),b.slice(0,b.indexOf(a.annee)+1))}},a.$inject=["$scope","$http","$location"],angular.module("idfPnrApp").controller("RevoirCtrl",a)}.call(this),function(){angular.module("idfPnrApp").directive("france",[function(){return{scope:{click:"&",value:"="},compile:function(){var a,b;return a=null,b=function(b){var c,d;return d=a.viewAB.height/a.viewAB.width,c=b.width()*d,b.height(c),a.resize()},{pre:function(c,d){var e;return a=$K.map(d,d.width(),.4*d.width()),e=function(){return a.getLayer("regions").style({fill:function(a){switch(a["name-1"]){case"ÃŽle-de-France":return"#E71A0F";case c.value["name-1"]:return"#98b800";default:return"#e0e4e5"}}})},c.$watch("value",e,!0),a.loadMap("images/france.svg",function(){return b(d),a.addLayer("regions",{name:"regions",styles:{"stroke-width":0,fill:"#e0e4e5"}}),e(),a.getLayer("regions").on("click",function(a){return"function"==typeof c.click&&c.click(),null!=c.value?(angular.copy(a,c.value),c.$apply()):void 0})})}}}}}])}.call(this),function(){angular.module("idfPnrApp").filter("slug",[function(){var a;return a=function(a){var b,c,d;for(d=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],b=0,c=d.length;c>b;)a=a.replace(d[b].re,d[b].ch),b++;return a.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/\-{2,}/g,"-")},function(b){return a(b)}}])}.call(this);